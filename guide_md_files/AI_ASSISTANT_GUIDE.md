# AI助手使用指南

## 功能概述

AI助手是一个智能对话系统，可以帮助用户：
- 规划旅游行程
- 推荐景点和活动
- 搜索酒店和航班信息
- 回答旅游相关问题
- 提供个性化建议

## 如何使用

### 1. 访问AI助手

在前端界面中，点击导航栏的 **"AI助手"** 按钮，即可进入AI助手页面。

### 2. 开始对话

- 在输入框中输入您的问题
- 点击 **"发送"** 按钮或按 **Enter** 键发送消息
- AI助手会立即回复您的问题

### 3. 快速操作

AI助手会在回复后提供一些快速操作建议（如"规划行程"、"搜索酒店"等），点击这些建议可以快速发送相关查询。

### 4. 对话历史

- AI助手会自动保存您的对话历史
- 刷新页面后，之前的对话记录仍然保留
- 点击右上角的清除按钮可以清除所有对话历史

## 使用示例

### 示例1：规划行程
```
用户：我想去北京旅游3天，有什么推荐吗？
AI：北京是一个充满历史文化的城市，我推荐您参观天安门广场、故宫博物院、颐和园等著名景点...
```

### 示例2：搜索酒店
```
用户：帮我搜索北京的酒店
AI：我可以帮您搜索酒店信息。请告诉我您的入住日期和退房日期...
```

### 示例3：推荐景点
```
用户：上海有什么好玩的景点？
AI：上海有很多值得游览的景点，比如外滩、东方明珠、豫园、田子坊等...
```

## 技术实现

### 前端组件
- **位置**: `frontend/src/components/AIAssistant.jsx`
- **功能**: 
  - 聊天界面UI
  - 消息发送和接收
  - 对话历史管理
  - 快速操作建议

### 后端API
- **端点**: `POST /api/ai/chat`
- **功能**: 处理用户消息并返回AI回复

### 配置要求

确保在 `.env` 文件中配置了AI服务的API密钥：

```env
# 使用阿里云百炼
OPENAI_API_KEY=your_dashscope_api_key
OPENAI_BASE_URL=https://dashscope.aliyun.com/api/v1

# 或使用Dify
DIFY_API_KEY=your_dify_api_key
DIFY_API_BASE=https://api.dify.ai/v1
```

## 特性

1. **实时对话**: 支持实时与AI助手对话
2. **上下文理解**: AI助手会根据对话上下文提供个性化建议
3. **历史记录**: 自动保存对话历史，刷新后不丢失
4. **快速操作**: 提供快速操作建议，提高交互效率
5. **响应式设计**: 适配不同屏幕尺寸

## 注意事项

1. **API配置**: 确保后端已正确配置AI服务的API密钥
2. **网络连接**: 需要稳定的网络连接才能正常使用
3. **用户ID**: 每个浏览器会话会自动生成一个用户ID，用于管理对话历史

## 故障排除

### 问题1：AI助手无法回复
- 检查后端服务是否正常运行
- 检查API密钥是否正确配置
- 查看浏览器控制台的错误信息

### 问题2：对话历史丢失
- 检查后端 `/api/ai/history` 接口是否正常工作
- 确认用户ID是否正确

### 问题3：消息发送失败
- 检查网络连接
- 确认后端服务地址是否正确（默认：http://localhost:5001）

